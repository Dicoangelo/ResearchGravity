<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ResearchGravity ‚Äî How It Works</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
  :root {
    --bg: #09090b; --surface: #18181b; --surface2: #27272a;
    --border: #3f3f46; --text: #fafafa; --dim: #a1a1aa; --muted: #71717a;
    --blue: #3b82f6; --green: #22c55e; --purple: #a855f7; --orange: #f97316;
    --cyan: #06b6d4; --pink: #ec4899; --emerald: #10b981; --red: #ef4444;
    --blue-glow: rgba(59,130,246,0.15); --green-glow: rgba(34,197,94,0.12);
    --purple-glow: rgba(168,85,247,0.12);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, sans-serif; overflow-x: hidden; }

  .slide { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 80px 40px; position: relative; }
  .slide::after { content: ''; position: absolute; bottom: 0; left: 10%; right: 10%; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); }

  /* ‚îÄ‚îÄ TITLE ‚îÄ‚îÄ */
  .title-slide { background: radial-gradient(ellipse at 50% 0%, rgba(59,130,246,0.08) 0%, transparent 60%); }
  .logo-icon { width: 88px; height: 88px; border-radius: 22px; background: linear-gradient(135deg, var(--blue), var(--purple)); display: flex; align-items: center; justify-content: center; font-size: 44px; margin-bottom: 32px; box-shadow: 0 0 80px rgba(59,130,246,0.3); }
  .title { font-size: 56px; font-weight: 900; letter-spacing: -2px; text-align: center; background: linear-gradient(135deg, #fff 30%, var(--blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .tagline { font-size: 20px; color: var(--dim); margin-top: 16px; text-align: center; max-width: 600px; line-height: 1.5; }

  .hero-stats { display: flex; gap: 48px; margin-top: 56px; }
  .hero-stat { text-align: center; padding: 24px 32px; background: var(--surface); border: 1px solid var(--border); border-radius: 16px; min-width: 160px; }
  .hero-stat-num { font-size: 40px; font-weight: 900; }
  .hero-stat-label { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-top: 4px; }
  .scroll-hint { position: absolute; bottom: 32px; color: var(--muted); font-size: 13px; letter-spacing: 1.5px; animation: bounce 2s infinite; }
  @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(8px)} }

  /* ‚îÄ‚îÄ STEP SLIDES ‚îÄ‚îÄ */
  .step-slide { max-width: 1000px; width: 100%; }
  .step-badge { display: inline-flex; align-items: center; gap: 10px; padding: 8px 20px; border-radius: 100px; font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 20px; }
  .step-badge.blue { background: var(--blue-glow); color: var(--blue); border: 1px solid rgba(59,130,246,0.3); }
  .step-badge.green { background: var(--green-glow); color: var(--green); border: 1px solid rgba(34,197,94,0.3); }
  .step-badge.purple { background: var(--purple-glow); color: var(--purple); border: 1px solid rgba(168,85,247,0.3); }
  .step-title { font-size: 44px; font-weight: 800; letter-spacing: -1.5px; line-height: 1.15; margin-bottom: 16px; }
  .step-desc { font-size: 18px; color: var(--dim); line-height: 1.6; max-width: 620px; margin-bottom: 48px; }

  /* ‚îÄ‚îÄ PIPELINE FLOW ‚îÄ‚îÄ */
  .pipeline { display: flex; align-items: stretch; gap: 0; width: 100%; justify-content: center; margin: 24px 0; }
  .pipe-node { flex: 1; max-width: 180px; padding: 28px 16px; text-align: center; border-radius: 16px; position: relative; border: 1px solid var(--border); background: var(--surface); }
  .pipe-node:hover { transform: translateY(-3px); box-shadow: 0 12px 40px rgba(0,0,0,0.5); transition: all 0.2s; }
  .pipe-icon { font-size: 40px; margin-bottom: 12px; display: block; }
  .pipe-label { font-size: 15px; font-weight: 700; margin-bottom: 4px; }
  .pipe-detail { font-size: 12px; color: var(--muted); }
  .pipe-arrow { display: flex; align-items: center; font-size: 24px; color: var(--muted); padding: 0 4px; }

  /* ‚îÄ‚îÄ SOURCE CARDS ‚îÄ‚îÄ */
  .source-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; width: 100%; max-width: 820px; }
  .source-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 20px 22px; display: flex; gap: 16px; transition: border-color 0.2s; }
  .source-card:hover { border-color: var(--blue); }
  .s-icon { width: 48px; height: 48px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
  .s-icon.arxiv { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(249,115,22,0.1)); }
  .s-icon.gh { background: rgba(255,255,255,0.06); }
  .s-name { font-size: 15px; font-weight: 700; }
  .s-meta { font-size: 12px; color: var(--muted); margin-top: 2px; }
  .tier { display: inline-block; padding: 2px 10px; border-radius: 100px; font-size: 10px; font-weight: 800; letter-spacing: 0.5px; margin-top: 8px; }
  .tier.t1 { background: rgba(34,197,94,0.12); color: var(--green); }
  .tier.t2 { background: rgba(249,115,22,0.12); color: var(--orange); }
  .rel { color: var(--dim); font-size: 11px; margin-left: 8px; }

  /* ‚îÄ‚îÄ FINDING CARD ‚îÄ‚îÄ */
  .finding-card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 40px; width: 100%; max-width: 820px; position: relative; overflow: hidden; }
  .finding-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--green), var(--emerald), var(--cyan)); }
  .f-section { margin-bottom: 28px; }
  .f-label { font-size: 11px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 12px; }
  .claim-box { font-size: 19px; font-weight: 500; line-height: 1.6; padding: 20px 24px; background: rgba(34,197,94,0.05); border-left: 3px solid var(--green); border-radius: 0 12px 12px 0; }
  .claim-box strong { color: var(--green); }

  /* Confidence ring */
  .conf-row { display: flex; align-items: center; gap: 32px; }
  .conf-ring { width: 130px; height: 130px; position: relative; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .conf-ring svg { position: absolute; top: 0; left: 0; transform: rotate(-90deg); }
  .conf-val { font-size: 32px; font-weight: 900; color: var(--green); }
  .conf-sub { font-size: 11px; color: var(--muted); text-align: center; }
  .streams { flex: 1; }
  .stream { display: flex; align-items: center; gap: 12px; margin: 12px 0; }
  .stream-name { font-size: 13px; color: var(--dim); min-width: 110px; text-align: right; }
  .stream-bar { flex: 1; height: 10px; background: var(--surface2); border-radius: 5px; overflow: hidden; }
  .stream-fill { height: 100%; border-radius: 5px; background: linear-gradient(90deg, var(--green), var(--emerald)); }
  .stream-score { font-size: 14px; font-weight: 700; min-width: 36px; color: var(--green); }
  .stream-w { font-size: 11px; color: var(--muted); min-width: 36px; }
  .lineage-row { display: flex; gap: 32px; flex-wrap: wrap; }
  .lineage-item label { display: block; font-size: 11px; color: var(--muted); margin-bottom: 2px; }
  .lineage-item code { font-size: 12px; color: var(--purple); }

  /* ‚îÄ‚îÄ TRACE TIMELINE ‚îÄ‚îÄ */
  .timeline { position: relative; width: 100%; max-width: 820px; }
  .timeline::before { content: ''; position: absolute; left: 30px; top: 0; bottom: 0; width: 2px; background: linear-gradient(to bottom, var(--blue), var(--green), var(--purple)); }
  .tl-step { display: flex; gap: 24px; margin-bottom: 28px; position: relative; }
  .tl-dot { width: 60px; height: 60px; border-radius: 16px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 28px; z-index: 1; }
  .tl-dot.s { background: rgba(59,130,246,0.12); border: 1px solid rgba(59,130,246,0.25); }
  .tl-dot.c { background: rgba(168,85,247,0.12); border: 1px solid rgba(168,85,247,0.25); }
  .tl-dot.a { background: rgba(34,197,94,0.12); border: 1px solid rgba(34,197,94,0.25); }
  .tl-body { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 22px 26px; flex: 1; }
  .tl-title { font-size: 17px; font-weight: 700; margin-bottom: 8px; }
  .tl-detail { font-size: 13px; color: var(--dim); line-height: 1.6; }
  .chips { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
  .chip { padding: 5px 14px; border-radius: 8px; font-size: 12px; background: var(--surface2); border: 1px solid var(--border); font-family: 'SF Mono', 'Fira Code', monospace; }
  .chip .sc { color: var(--green); font-weight: 700; }

  /* Real findings from DB */
  .real-finding { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 16px 20px; margin: 8px 0; }
  .rf-type { display: inline-block; padding: 2px 10px; border-radius: 100px; font-size: 10px; font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase; }
  .rf-type.research { background: rgba(59,130,246,0.12); color: var(--blue); }
  .rf-type.insight { background: rgba(168,85,247,0.12); color: var(--purple); }
  .rf-type.technical { background: rgba(6,182,212,0.12); color: var(--cyan); }
  .rf-content { font-size: 13px; color: var(--dim); margin-top: 8px; line-height: 1.5; }
  .rf-conf { font-size: 12px; color: var(--green); font-weight: 700; margin-top: 6px; }

  /* reason list */
  .r-list { list-style: none; }
  .r-list li { padding: 10px 16px; margin: 6px 0; border-radius: 10px; font-size: 13px; display: flex; align-items: center; gap: 12px; }
  .r-list li.pass { background: rgba(34,197,94,0.05); }
  .r-icon { font-size: 18px; flex-shrink: 0; }

  /* ‚îÄ‚îÄ LIVE DATA SLIDE ‚îÄ‚îÄ */
  .db-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; max-width: 820px; width: 100%; margin-top: 32px; }
  .db-card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 24px; text-align: center; }
  .db-card:hover { border-color: var(--cyan); transition: border-color 0.2s; }
  .db-num { font-size: 36px; font-weight: 900; }
  .db-label { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }
  .db-sub { font-size: 11px; color: var(--muted); margin-top: 8px; }

  .type-bars { max-width: 600px; width: 100%; margin-top: 32px; }
  .type-row { display: flex; align-items: center; gap: 12px; margin: 8px 0; }
  .type-name { font-size: 13px; min-width: 100px; text-align: right; color: var(--dim); }
  .type-bar-track { flex: 1; height: 20px; background: var(--surface); border-radius: 6px; overflow: hidden; border: 1px solid var(--border); }
  .type-bar-fill { height: 100%; border-radius: 6px; display: flex; align-items: center; padding-left: 8px; font-size: 11px; font-weight: 700; color: #000; }
  .type-count { font-size: 13px; min-width: 50px; font-weight: 600; }

  /* ‚îÄ‚îÄ FINAL ‚îÄ‚îÄ */
  .final-slide { background: radial-gradient(ellipse at 50% 100%, rgba(34,197,94,0.06) 0%, transparent 60%); }
  .final-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; max-width: 900px; width: 100%; margin-top: 48px; }
  .final-card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 32px; text-align: center; transition: transform 0.2s, border-color 0.2s; }
  .final-card:hover { transform: translateY(-4px); border-color: var(--green); }
  .final-icon { font-size: 48px; margin-bottom: 16px; }
  .final-label { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
  .final-value { font-size: 14px; color: var(--dim); line-height: 1.5; }
  .db-badge { display: inline-flex; align-items: center; gap: 8px; padding: 12px 28px; border-radius: 100px; margin-top: 40px; background: var(--surface); border: 1px solid var(--border); font-size: 14px; color: var(--dim); }
  .db-badge strong { color: var(--text); }

  /* ‚îÄ‚îÄ SCROLL ANIMATIONS ‚îÄ‚îÄ */
  .reveal { opacity: 0; transform: translateY(40px); transition: opacity 0.7s ease, transform 0.7s ease; }
  .reveal.visible { opacity: 1; transform: translateY(0); }
  .reveal.delay-1 { transition-delay: 0.1s; }
  .reveal.delay-2 { transition-delay: 0.2s; }
  .reveal.delay-3 { transition-delay: 0.3s; }
  .reveal.delay-4 { transition-delay: 0.4s; }

  /* ‚îÄ‚îÄ ANIMATED PIPELINE ‚îÄ‚îÄ */
  .pipe-node { position: relative; overflow: hidden; }
  .pipe-node.active { border-color: var(--green); box-shadow: 0 0 30px rgba(34,197,94,0.15); }
  .pipe-node.active .pipe-icon { animation: pulse 0.6s ease; }
  @keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.2)} 100%{transform:scale(1)} }
  .pipe-arrow.lit { color: var(--green); transition: color 0.3s; }
  .pipe-progress { position: absolute; bottom: 0; left: 0; height: 3px; background: var(--green); border-radius: 0 0 16px 16px; width: 0; transition: width 0.4s ease; }
  .pipe-node.active .pipe-progress { width: 100%; }

  /* ‚îÄ‚îÄ LIVE DEMO ‚îÄ‚îÄ */
  .demo-slide { background: radial-gradient(ellipse at 50% 50%, rgba(168,85,247,0.06) 0%, transparent 60%); }
  .demo-container { max-width: 820px; width: 100%; }
  .demo-input-row { display: flex; gap: 12px; margin-bottom: 24px; }
  .demo-input {
    flex: 1; padding: 14px 20px; border-radius: 12px; border: 1px solid var(--border);
    background: var(--surface); color: var(--text); font-family: 'Inter', sans-serif;
    font-size: 15px; outline: none; transition: border-color 0.2s;
  }
  .demo-input:focus { border-color: var(--purple); }
  .demo-input::placeholder { color: var(--muted); }
  .demo-btn {
    padding: 14px 28px; border-radius: 12px; border: none; cursor: pointer;
    font-size: 15px; font-weight: 700; font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, var(--purple), var(--blue)); color: #fff;
    transition: transform 0.15s, box-shadow 0.15s;
  }
  .demo-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(168,85,247,0.3); }
  .demo-btn:active { transform: translateY(0); }
  .demo-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  .demo-output {
    background: var(--surface); border: 1px solid var(--border); border-radius: 16px;
    padding: 28px; min-height: 200px; position: relative; overflow: hidden;
  }
  .demo-output::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, var(--purple), var(--blue), var(--green));
    opacity: 0; transition: opacity 0.3s;
  }
  .demo-output.running::before { opacity: 1; animation: shimmer 1.5s infinite; }
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  .demo-placeholder { color: var(--muted); font-size: 15px; text-align: center; padding: 60px 0; }

  .demo-stage { margin-bottom: 20px; animation: fadeIn 0.4s ease; }
  @keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
  .demo-stage-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
  .demo-stage-icon { font-size: 20px; }
  .demo-stage-title { font-size: 14px; font-weight: 700; }
  .demo-stage-status { margin-left: auto; font-size: 12px; padding: 2px 10px; border-radius: 100px; }
  .demo-stage-status.done { background: rgba(34,197,94,0.12); color: var(--green); }
  .demo-stage-status.running { background: rgba(59,130,246,0.12); color: var(--blue); }
  .demo-stage-body { font-size: 13px; color: var(--dim); padding-left: 30px; line-height: 1.6; }

  .demo-mini-bar { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
  .demo-mini-bar-label { font-size: 12px; color: var(--dim); min-width: 90px; text-align: right; }
  .demo-mini-bar-track { flex: 1; height: 6px; background: var(--surface2); border-radius: 3px; overflow: hidden; }
  .demo-mini-bar-fill { height: 100%; border-radius: 3px; background: var(--green); transition: width 0.8s ease; }

  .demo-finding-preview {
    background: rgba(34,197,94,0.04); border: 1px solid rgba(34,197,94,0.15);
    border-radius: 10px; padding: 14px 18px; margin-top: 12px;
  }
  .demo-finding-claim { font-size: 14px; font-weight: 500; line-height: 1.5; }
  .demo-finding-meta { font-size: 12px; color: var(--muted); margin-top: 8px; display: flex; gap: 16px; }

  /* ‚îÄ‚îÄ NAV DOTS ‚îÄ‚îÄ */
  .nav-dots {
    position: fixed; right: 24px; top: 50%; transform: translateY(-50%);
    display: flex; flex-direction: column; gap: 12px; z-index: 100;
  }
  .nav-dot {
    width: 10px; height: 10px; border-radius: 50%; background: var(--surface2);
    border: 1px solid var(--border); cursor: pointer; transition: all 0.3s;
    position: relative;
  }
  .nav-dot:hover { background: var(--muted); transform: scale(1.3); }
  .nav-dot.active { background: var(--blue); border-color: var(--blue); box-shadow: 0 0 12px rgba(59,130,246,0.4); transform: scale(1.2); }
  .nav-dot-label {
    position: absolute; right: 22px; top: 50%; transform: translateY(-50%);
    white-space: nowrap; font-size: 11px; color: var(--muted); background: var(--surface);
    border: 1px solid var(--border); border-radius: 6px; padding: 4px 10px;
    opacity: 0; pointer-events: none; transition: opacity 0.2s;
  }
  .nav-dot:hover .nav-dot-label { opacity: 1; }

  /* ‚îÄ‚îÄ PROGRESS BAR ‚îÄ‚îÄ */
  .progress-bar {
    position: fixed; top: 0; left: 0; height: 3px; z-index: 100;
    background: linear-gradient(90deg, var(--blue), var(--purple), var(--green));
    transition: width 0.3s ease; width: 0%;
  }

  /* ‚îÄ‚îÄ SLIDE NUMBER ‚îÄ‚îÄ */
  .slide-num {
    position: absolute; top: 24px; left: 32px; font-size: 11px; color: var(--muted);
    letter-spacing: 2px; font-weight: 600;
  }

  @media (max-width: 700px) {
    .source-grid,.db-grid,.final-grid { grid-template-columns: 1fr; }
    .pipeline { flex-direction: column; align-items: center; }
    .pipe-arrow { transform: rotate(90deg); }
    .title { font-size: 36px; } .step-title { font-size: 28px; }
    .hero-stats { flex-direction: column; gap: 16px; }
    .conf-row { flex-direction: column; align-items: center; }
    .demo-input-row { flex-direction: column; }
    .nav-dots { display: none; }
  }
</style>
</head>
<body>

<!-- Navigation -->
<div class="progress-bar" id="progress-bar"></div>
<div class="nav-dots" id="nav-dots"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 0: TITLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide title-slide" data-slide="0" data-label="Title">
  <div class="logo-icon">üî¨</div>
  <h1 class="title">ResearchGravity</h1>
  <p class="tagline">From raw input to verified, retrievable knowledge ‚Äî in under 5 seconds. Running against a live database, not a mock.</p>
  <div class="hero-stats">
    <div class="hero-stat">
      <div class="hero-stat-num" style="color:var(--blue)">33,237</div>
      <div class="hero-stat-label">Findings</div>
    </div>
    <div class="hero-stat">
      <div class="hero-stat-num" style="color:var(--green)">8,955</div>
      <div class="hero-stat-label">URLs Indexed</div>
    </div>
    <div class="hero-stat">
      <div class="hero-stat-num" style="color:var(--purple)">8,156</div>
      <div class="hero-stat-label">Sessions</div>
    </div>
    <div class="hero-stat">
      <div class="hero-stat-num" style="color:var(--cyan)">2,279</div>
      <div class="hero-stat-label">Lineage Links</div>
    </div>
  </div>
  <div class="scroll-hint">SCROLL ‚Üì</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 1: LIVE DATA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="1" data-label="Live Data">
  <div class="step-slide">
    <div class="step-badge blue">üíæ Live Database</div>
    <div class="step-title">This is real data.<br>Not a demo.</div>
    <div class="step-desc">antigravity.db contains 33,237 findings across 6 types, 8,955 tracked URLs across 3 tiers, and 2,279 lineage relationships. Here's the breakdown:</div>

    <div class="type-bars">
      <div class="type-row">
        <span class="type-name">technical</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:100%;background:var(--cyan)">15,768</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">research</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:32.5%;background:var(--blue)">5,133</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">insight</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:31.4%;background:var(--purple)">4,948</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">learning</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:16.1%;background:var(--emerald)">2,542</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">observation</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:14.4%;background:var(--orange)">2,278</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">thesis</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:5.2%;background:var(--pink)">815</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">gap</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:5.1%;background:var(--red)">802</div></div>
      </div>
      <div class="type-row">
        <span class="type-name">innovation</span>
        <div class="type-bar-track"><div class="type-bar-fill" style="width:1%;background:var(--green)">163</div></div>
      </div>
    </div>

    <div style="display:flex;gap:16px;margin-top:32px;flex-wrap:wrap;justify-content:center">
      <div style="padding:8px 20px;border-radius:10px;background:var(--surface);border:1px solid var(--border);font-size:13px">
        <span style="color:var(--green);font-weight:700">1,501</span> <span style="color:var(--muted)">Tier 1 URLs</span>
      </div>
      <div style="padding:8px 20px;border-radius:10px;background:var(--surface);border:1px solid var(--border);font-size:13px">
        <span style="color:var(--orange);font-weight:700">1,364</span> <span style="color:var(--muted)">Tier 2 URLs</span>
      </div>
      <div style="padding:8px 20px;border-radius:10px;background:var(--surface);border:1px solid var(--border);font-size:13px">
        <span style="color:var(--dim);font-weight:700">6,090</span> <span style="color:var(--muted)">Tier 3 URLs</span>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 2: REAL FINDINGS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="2" data-label="Findings">
  <div class="step-slide">
    <div class="step-badge green">üß† From the Knowledge Base</div>
    <div class="step-title">Real findings.<br>Real citations.</div>
    <div class="step-desc">These are actual research findings stored in antigravity.db ‚Äî each with arXiv citations, confidence scores, and full provenance.</div>

    <div style="display:flex;flex-direction:column;gap:12px;max-width:820px;width:100%">
      <div class="real-finding">
        <span class="rf-type research">research</span>
        <div class="rf-content">BioZero (arXiv:2409.17509) proposes fully decentralized biometric authentication via blockchain smart contracts using Pedersen commitment and homomorphic computation with zero-knowledge proofs.</div>
      </div>
      <div class="real-finding">
        <span class="rf-type research">research</span>
        <div class="rf-content">TBFL (arXiv:2602.02629) proposes Trustworthy Blockchain-based Federated Learning securing participant identity with Decentralized Identifiers (DIDs) and Verifiable Credentials (VCs).</div>
      </div>
      <div class="real-finding">
        <span class="rf-type research">research</span>
        <div class="rf-content">Quantum Secure Biometric Auth (arXiv:2601.04852 Jan 2026): Post-quantum cryptography plus QKD for biometric data in decentralized identity frameworks. Qiskit: 15 bits/sec at 89% efficiency.</div>
      </div>
      <div class="real-finding">
        <span class="rf-type research">research</span>
        <div class="rf-content">EU AI Act verification framework (arXiv:2512.13907): Human agency and oversight as cornerstones requiring clear responsibility allocation, secure logging, incident reporting channels.</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 3: PIPELINE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="3" data-label="Pipeline">
  <div class="step-slide">
    <div class="step-badge blue">‚ö° The Pipeline</div>
    <div class="step-title">Five stages. Full provenance.<br>Under 5 seconds.</div>
    <div class="step-desc">Every piece of knowledge flows through ingestion, extraction, structuring, validation, and storage ‚Äî with a complete audit trace at every step.</div>
    <div class="pipeline">
      <div class="pipe-node">
        <span class="pipe-icon">üì•</span>
        <div class="pipe-label">Ingest</div>
        <div class="pipe-detail">URL or transcript</div>
      </div>
      <div class="pipe-arrow">‚Üí</div>
      <div class="pipe-node">
        <span class="pipe-icon">üîç</span>
        <div class="pipe-label">Extract</div>
        <div class="pipe-detail">arXiv, GitHub, URLs</div>
      </div>
      <div class="pipe-arrow">‚Üí</div>
      <div class="pipe-node">
        <span class="pipe-icon">üìÑ</span>
        <div class="pipe-label">Structure</div>
        <div class="pipe-detail">EvidencedFinding</div>
      </div>
      <div class="pipe-arrow">‚Üí</div>
      <div class="pipe-node">
        <span class="pipe-icon">‚öñÔ∏è</span>
        <div class="pipe-label">Validate</div>
        <div class="pipe-detail">3-stream oracle</div>
      </div>
      <div class="pipe-arrow">‚Üí</div>
      <div class="pipe-node">
        <span class="pipe-icon">üíæ</span>
        <div class="pipe-label">Store</div>
        <div class="pipe-detail">SQLite + vectors</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 4: INGEST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="4" data-label="Proof 1">
  <div class="step-slide">
    <div class="step-badge blue">üì• Proof 1 ‚Äî Ingest</div>
    <div class="step-title">Feed it anything.<br>Get structured evidence.</div>
    <div class="step-desc">arXiv paper, GitHub repo, meeting transcript, research notes ‚Äî the extractor finds every citation automatically and classifies by tier.</div>
    <div class="source-grid">
      <div class="source-card">
        <div class="s-icon arxiv">üìë</div>
        <div>
          <div class="s-name">arXiv:2602.11865</div>
          <div class="s-meta">Bayesian Beta trust scoring for delegation</div>
          <div><span class="tier t1">Tier 1</span><span class="rel">relevance: 0.85</span></div>
        </div>
      </div>
      <div class="source-card">
        <div class="s-icon arxiv">üìë</div>
        <div>
          <div class="s-name">arXiv:2512.05470</div>
          <div class="s-meta">Agentic File System ‚Äî persistent memory layers</div>
          <div><span class="tier t1">Tier 1</span><span class="rel">relevance: 0.85</span></div>
        </div>
      </div>
      <div class="source-card">
        <div class="s-icon arxiv">üìë</div>
        <div>
          <div class="s-name">arXiv:2508.17536</div>
          <div class="s-meta">Voting-based consensus approaches</div>
          <div><span class="tier t1">Tier 1</span><span class="rel">relevance: 0.85</span></div>
        </div>
      </div>
      <div class="source-card">
        <div class="s-icon gh">‚öôÔ∏è</div>
        <div>
          <div class="s-name">antigravity-coordinator</div>
          <div class="s-meta">11-dimensional task profiles</div>
          <div><span class="tier t2">Tier 2</span><span class="rel">relevance: 0.65</span></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 5: FINDING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="5" data-label="Proof 2">
  <div class="step-slide">
    <div class="step-badge green">üìÑ Proof 2 ‚Äî Finding</div>
    <div class="step-title">The atomic unit.<br>Fully evidenced.</div>
    <div class="step-desc">Claim + evidence spans + citations + confidence + lineage ID. Every finding is traceable back to its sources and forward to what it enables.</div>
    <div class="finding-card">
      <div class="f-section">
        <div class="f-label">Claim</div>
        <div class="claim-box">Bayesian Beta trust scoring outperforms static trust tables by <strong>34%</strong> on delegation accuracy. Trust should decay with staleness ‚Äî a 0.95 decay per 7-day window prevents overconfidence.</div>
      </div>
      <div class="f-section">
        <div class="f-label">Confidence &amp; Oracle Validation</div>
        <div class="conf-row">
          <div class="conf-ring">
            <svg width="130" height="130" viewBox="0 0 130 130">
              <circle cx="65" cy="65" r="56" fill="none" stroke="var(--surface2)" stroke-width="8"/>
              <circle cx="65" cy="65" r="56" fill="none" stroke="var(--green)" stroke-width="8" stroke-dasharray="351.9" stroke-dashoffset="28.1" stroke-linecap="round"/>
            </svg>
            <div><div class="conf-val">92%</div><div class="conf-sub">confidence</div></div>
          </div>
          <div class="streams">
            <div class="stream">
              <span class="stream-name">Accuracy</span>
              <div class="stream-bar"><div class="stream-fill" style="width:100%"></div></div>
              <span class="stream-score">1.00</span>
              <span class="stream-w">40%</span>
            </div>
            <div class="stream">
              <span class="stream-name">Completeness</span>
              <div class="stream-bar"><div class="stream-fill" style="width:93%"></div></div>
              <span class="stream-score">0.93</span>
              <span class="stream-w">35%</span>
            </div>
            <div class="stream">
              <span class="stream-name">Relevance</span>
              <div class="stream-bar"><div class="stream-fill" style="width:78%"></div></div>
              <span class="stream-score">0.78</span>
              <span class="stream-w">25%</span>
            </div>
          </div>
        </div>
      </div>
      <div class="f-section" style="margin-bottom:0">
        <div class="f-label">Lineage</div>
        <div class="lineage-row">
          <div class="lineage-item"><label>Finding ID</label><code>finding-1771212924-5c2dc7aba</code></div>
          <div class="lineage-item"><label>Session</label><code>proof-1771212924-b77f6402</code></div>
          <div class="lineage-item"><label>Stored</label><code style="color:var(--dim)">antigravity.db</code></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 6: TRACE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" data-slide="6" data-label="Proof 3">
  <div class="step-slide">
    <div class="step-badge purple">üîé Proof 3 ‚Äî Trace</div>
    <div class="step-title">Full audit trail.<br>Nothing hidden.</div>
    <div class="step-desc">See exactly what retrieval returned, what critics said, and why the final answer is what it is.</div>
    <div class="timeline">
      <div class="tl-step">
        <div class="tl-dot s">üîç</div>
        <div class="tl-body">
          <div class="tl-title">Retrieval</div>
          <div class="tl-detail">FTS5 full-text search across <strong style="color:var(--text)">33,237 findings</strong><br>Query: <code style="color:var(--blue)">"bayesian trust scoring arxiv outperforms"</code></div>
          <div class="chips">
            <div class="chip">finding-...5c2dc <span class="sc">0.92</span></div>
            <div class="chip">finding-...bed12 <span class="sc">0.92</span></div>
            <div class="chip">finding-...38327 <span class="sc">0.92</span></div>
            <div class="chip" style="color:var(--muted)">+2 more</div>
          </div>
        </div>
      </div>
      <div class="tl-step">
        <div class="tl-dot c">‚öñÔ∏è</div>
        <div class="tl-body">
          <div class="tl-title">3-Stream Oracle Critique</div>
          <div class="tl-detail">Three independent validators score in parallel. Consensus via weighted voting.</div>
          <div style="margin-top:16px">
            <div class="stream"><span class="stream-name">Accuracy</span><div class="stream-bar"><div class="stream-fill" style="width:100%"></div></div><span class="stream-score">1.00</span><span class="stream-w">√ó 0.40</span></div>
            <div class="stream"><span class="stream-name">Completeness</span><div class="stream-bar"><div class="stream-fill" style="width:93%"></div></div><span class="stream-score">0.93</span><span class="stream-w">√ó 0.35</span></div>
            <div class="stream"><span class="stream-name">Relevance</span><div class="stream-bar"><div class="stream-fill" style="width:78%"></div></div><span class="stream-score">0.78</span><span class="stream-w">√ó 0.25</span></div>
          </div>
          <div style="margin-top:14px;font-size:15px">Weighted consensus: <strong style="color:var(--green)">92.05%</strong> ‚Äî <span style="color:var(--green);font-weight:700">VALIDATED</span></div>
        </div>
      </div>
      <div class="tl-step">
        <div class="tl-dot a">‚úÖ</div>
        <div class="tl-body">
          <div class="tl-title">Answer Justification</div>
          <ul class="r-list">
            <li><span class="r-icon">üì•</span> Ingested transcript ‚Äî 1,246 characters</li>
            <li class="pass"><span class="r-icon">üè∑Ô∏è</span> Extracted 4 evidence sources (3 Tier 1 primary research)</li>
            <li><span class="r-icon">üéØ</span> Accuracy: 1.00 ‚Äî all arXiv IDs valid, URLs well-formed</li>
            <li><span class="r-icon">üìä</span> Completeness: 0.93 ‚Äî sources cover claim keywords</li>
            <li><span class="r-icon">üîó</span> Relevance: 0.78 ‚Äî 75% Tier 1 source ratio</li>
            <li class="pass"><span class="r-icon">‚úÖ</span> Confidence 92.05% exceeds 70% threshold</li>
            <li class="pass"><span class="r-icon">üíæ</span> Stored with full provenance in antigravity.db</li>
            <li class="pass"><span class="r-icon">üîÑ</span> Round-trip retrieval verified ‚Äî record intact</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 7: LIVE DEMO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide demo-slide" data-slide="7" data-label="Try It">
  <div class="step-slide demo-container">
    <div class="step-badge purple reveal">‚ö° Try It Live</div>
    <div class="step-title reveal delay-1">Paste anything.<br>Watch it process.</div>
    <div class="step-desc reveal delay-2">Enter a URL or paste a transcript. The pipeline runs in real-time ‚Äî extraction, validation, and storage happen right here.</div>

    <div class="demo-input-row reveal delay-3">
      <input class="demo-input" id="demo-input" type="text" placeholder="Paste a URL or research text...">
      <button class="demo-btn" id="demo-btn" onclick="runDemo()">Run Pipeline</button>
    </div>

    <div class="demo-output reveal delay-4" id="demo-output">
      <div class="demo-placeholder" id="demo-placeholder">
        üì• Paste a URL or text above and hit <strong>Run Pipeline</strong><br>
        <span style="font-size:13px;margin-top:8px;display:block">or click to try the built-in demo transcript</span>
      </div>
      <div id="demo-stages" style="display:none"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SLIDE 8: SUMMARY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide final-slide" data-slide="8" data-label="Summary">
  <div class="step-title" style="text-align:center">Proof Complete</div>
  <p class="tagline">All three proof items verified in <strong style="color:var(--green)">4.96 seconds</strong></p>
  <div class="final-grid">
    <div class="final-card">
      <div class="final-icon">üì•</div>
      <div class="final-label">Ingest</div>
      <div class="final-value">URL or transcript ‚Üí 4 sources extracted ‚Üí stored in SQLite with tier classification</div>
    </div>
    <div class="final-card">
      <div class="final-icon">üìÑ</div>
      <div class="final-label">Finding</div>
      <div class="final-value">Claim + 4 citations + 92% confidence + 3-stream oracle validation + lineage ID</div>
    </div>
    <div class="final-card">
      <div class="final-icon">üîé</div>
      <div class="final-label">Trace</div>
      <div class="final-value">Retrieval(5 hits) ‚Üí Critics(3 streams) ‚Üí Step-by-step answer justification</div>
    </div>
  </div>
  <div class="db-badge">üíæ Running against <strong>33,237 real findings</strong> &nbsp;¬∑&nbsp; <strong>8,955 URLs</strong> &nbsp;¬∑&nbsp; <strong>2,279 lineage links</strong> in antigravity.db</div>
</div>

<script>
// ‚îÄ‚îÄ Scroll reveal ‚îÄ‚îÄ
const observer = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.15, rootMargin: '0px 0px -50px 0px' });
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

// ‚îÄ‚îÄ Animated pipeline ‚îÄ‚îÄ
const pipeObserver = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) animatePipeline();
  });
}, { threshold: 0.4 });
const pipelineEl = document.querySelector('.pipeline');
if (pipelineEl) pipeObserver.observe(pipelineEl);

function animatePipeline() {
  const nodes = document.querySelectorAll('.pipe-node');
  const arrows = document.querySelectorAll('.pipe-arrow');
  nodes.forEach(n => n.classList.remove('active'));
  arrows.forEach(a => a.classList.remove('lit'));
  nodes.forEach((node, i) => {
    setTimeout(() => {
      node.classList.add('active');
      if (i > 0 && arrows[i-1]) arrows[i-1].classList.add('lit');
    }, i * 400);
  });
}

// ‚îÄ‚îÄ Live demo (REAL BACKEND via SSE) ‚îÄ‚îÄ
const API_BASE = 'http://localhost:3849';
const STAGE_ICONS = { ingest: 'üì•', extract: 'üîç', validate: '‚öñÔ∏è', store: 'üíæ', retrieve: 'üîÑ' };
const STAGE_TITLES = { ingest: 'Ingesting', extract: 'Extracting Evidence', validate: '3-Stream Oracle Critique', store: 'Storing Finding', retrieve: 'Round-Trip Retrieval' };

// Click placeholder to use built-in demo (empty text = server uses demo transcript)
document.getElementById('demo-placeholder').addEventListener('click', () => {
  document.getElementById('demo-input').value = '';
  runDemo();
});

async function runDemo() {
  const inputVal = document.getElementById('demo-input').value.trim();
  const btn = document.getElementById('demo-btn');
  const output = document.getElementById('demo-output');
  const stagesEl = document.getElementById('demo-stages');
  const placeholder = document.getElementById('demo-placeholder');

  btn.disabled = true;
  btn.textContent = 'Running...';
  output.classList.add('running');
  placeholder.style.display = 'none';
  stagesEl.style.display = 'block';
  stagesEl.innerHTML = '';

  // Determine if input is URL or text
  const isUrl = inputVal.match(/^https?:\/\//);
  const body = isUrl ? { url: inputVal } : { text: inputVal };

  try {
    const resp = await fetch(API_BASE + '/api/pipeline/stream', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(body),
    });

    if (!resp.ok) throw new Error('API returned ' + resp.status);

    const reader = resp.body.getReader();
    const decoder = new TextDecoder();
    let buffer = '';

    while (true) {
      const { done, value } = await reader.read();
      if (done) break;
      buffer += decoder.decode(value, { stream: true });

      // Parse SSE events from buffer
      const lines = buffer.split('\n');
      buffer = lines.pop() || '';

      let eventType = '';
      for (const line of lines) {
        if (line.startsWith('event: ')) {
          eventType = line.slice(7).trim();
        } else if (line.startsWith('data: ')) {
          const data = JSON.parse(line.slice(6));
          handleSSE(eventType, data, stagesEl);
        }
      }
    }
  } catch (err) {
    stagesEl.innerHTML += '<div style="color:var(--red);padding:16px;font-size:14px">Pipeline API not running. Start it with: <code style="color:var(--cyan)">python3 proof_api.py</code> in the researchgravity directory.</div>';
  }

  output.classList.remove('running');
  btn.disabled = false;
  btn.textContent = 'Run Pipeline';
}

function handleSSE(event, data, container) {
  if (event === 'stage') {
    const icon = STAGE_ICONS[data.stage] || '‚öôÔ∏è';
    const title = STAGE_TITLES[data.stage] || data.stage;

    if (data.status === 'running') {
      addStageSync(container, icon, title, 'running', data.detail);
    } else if (data.status === 'done') {
      // Build rich HTML from real data
      let body = data.detail;

      if (data.stage === 'extract' && data.data && data.data.sources) {
        body = '';
        data.data.sources.forEach(s => {
          const tierColor = s.tier === 1 ? 'var(--green)' : s.tier === 2 ? 'var(--orange)' : 'var(--muted)';
          const label = s.arxiv_id ? 'arXiv:' + s.arxiv_id : s.url;
          body += '<div style="margin:4px 0"><span style="color:' + tierColor + ';font-size:11px;font-weight:700">T' + s.tier + '</span> <span style="color:var(--cyan)">' + label + '</span> <span style="color:var(--muted);font-size:11px">relevance: ' + s.relevance.toFixed(2) + '</span></div>';
        });
        if (!body) body = '<div style="color:var(--muted)">No citations found</div>';
      }

      if (data.stage === 'validate' && data.data && data.data.streams) {
        const d = data.data;
        body = '';
        d.streams.forEach(s => {
          const pct = (s.score * 100).toFixed(0);
          body += '<div class="demo-mini-bar"><span class="demo-mini-bar-label">' + s.name.charAt(0).toUpperCase() + s.name.slice(1) + '</span><div class="demo-mini-bar-track"><div class="demo-mini-bar-fill" style="width:' + pct + '%"></div></div><span style="font-size:12px;font-weight:700;color:var(--green);min-width:32px">' + s.score.toFixed(2) + '</span></div>';
        });
        const confPct = (d.confidence * 100).toFixed(1);
        const valColor = d.validated ? 'var(--green)' : 'var(--orange)';
        const valText = d.validated ? 'VALIDATED' : 'BELOW THRESHOLD';
        body += '<div style="margin-top:8px;font-size:13px">Weighted: <strong style="color:var(--green)">' + confPct + '%</strong> ‚Äî <span style="color:' + valColor + ';font-weight:700">' + valText + '</span></div>';
      }

      if (data.stage === 'store' && data.data) {
        const d = data.data;
        const confPct = (d.confidence * 100).toFixed(0);
        const valBadge = d.validated ? '‚úÖ Validated' : '‚ö†Ô∏è Needs review';
        body = 'Stored in antigravity.db ‚Üí findings table';
        body += '<div class="demo-finding-preview"><div class="demo-finding-claim">' + d.claim + '</div><div class="demo-finding-meta"><span>üÜî <code style="color:var(--purple);font-size:11px">' + d.finding_id + '</code></span><span>üìä ' + confPct + '% confidence</span><span>üìé ' + d.source_count + ' sources</span><span>' + valBadge + '</span></div></div>';
      }

      if (data.stage === 'retrieve' && data.data) {
        const d = data.data;
        body = '<span style="color:var(--green)">‚úì</span> Retrieved <code style="color:var(--purple);font-size:12px">' + d.finding_id + '</code> ‚Äî record intact (' + d.elapsed_seconds + 's)';
        if (d.related_count > 0) {
          body += '<div style="margin-top:6px;font-size:12px;color:var(--dim)">Also found ' + d.related_count + ' related findings via FTS search: "' + d.search_query + '"</div>';
        }
      }

      updateLastStage(container, 'done', body);
    }
  }

  if (event === 'complete') {
    // Add a real-data badge
    const badge = document.createElement('div');
    badge.style.cssText = 'margin-top:16px;padding:10px 16px;border-radius:10px;background:rgba(34,197,94,0.08);border:1px solid rgba(34,197,94,0.2);font-size:12px;color:var(--green);text-align:center';
    badge.innerHTML = 'üî¨ <strong>100% REAL</strong> ‚Äî Finding <code style="color:var(--purple)">' + data.finding_id + '</code> is now permanently stored in antigravity.db (' + data.elapsed + 's)';
    container.appendChild(badge);
  }
}

function addStageSync(container, icon, title, status, body) {
  const div = document.createElement('div');
  div.className = 'demo-stage';
  div.innerHTML = '<div class="demo-stage-header"><span class="demo-stage-icon">' + icon + '</span><span class="demo-stage-title">' + title + '</span><span class="demo-stage-status ' + status + '">' + (status === 'running' ? '‚óè Running' : '‚úì Done') + '</span></div><div class="demo-stage-body">' + body + '</div>';
  container.appendChild(div);
}

function addStage(container, icon, title, status, body) {
  const div = document.createElement('div');
  div.className = 'demo-stage';
  div.innerHTML = `
    <div class="demo-stage-header">
      <span class="demo-stage-icon">${icon}</span>
      <span class="demo-stage-title">${title}</span>
      <span class="demo-stage-status ${status}">${status === 'running' ? '‚óè Running' : '‚úì Done'}</span>
    </div>
    <div class="demo-stage-body">${body}</div>
  `;
  container.appendChild(div);
  return sleep(100);
}

function updateLastStage(container, status, newBody) {
  const last = container.querySelector('.demo-stage:last-child');
  if (!last) return;
  const statusEl = last.querySelector('.demo-stage-status');
  statusEl.className = `demo-stage-status ${status}`;
  statusEl.textContent = status === 'done' ? '‚úì Done' : '‚óè Running';
  last.querySelector('.demo-stage-body').innerHTML = newBody;
}

function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

// ‚îÄ‚îÄ Add reveal classes to all slide content ‚îÄ‚îÄ
document.querySelectorAll('.step-badge, .step-title, .step-desc, .source-grid, .finding-card, .timeline, .pipeline, .type-bars, .final-grid, .db-badge, .hero-stats').forEach((el, i) => {
  if (!el.classList.contains('reveal')) {
    el.classList.add('reveal');
    observer.observe(el);
  }
});

// ‚îÄ‚îÄ Counter animation for hero stats ‚îÄ‚îÄ
const counterObserver = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.querySelectorAll('.hero-stat-num').forEach(num => {
        const target = parseInt(num.textContent.replace(/,/g, ''));
        animateCounter(num, target);
      });
      counterObserver.unobserve(e.target);
    }
  });
}, { threshold: 0.5 });
const heroStats = document.querySelector('.hero-stats');
if (heroStats) counterObserver.observe(heroStats);

function animateCounter(el, target) {
  const duration = 1200;
  const start = performance.now();
  const color = el.style.color;
  function tick(now) {
    const progress = Math.min((now - start) / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3);
    el.textContent = Math.floor(target * eased).toLocaleString();
    if (progress < 1) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

// ‚îÄ‚îÄ Nav dots + progress bar + keyboard ‚îÄ‚îÄ
const slides = document.querySelectorAll('.slide[data-slide]');
const navContainer = document.getElementById('nav-dots');
const progressBar = document.getElementById('progress-bar');

slides.forEach((slide, i) => {
  // Add slide number
  const num = document.createElement('div');
  num.className = 'slide-num';
  num.textContent = `${String(i + 1).padStart(2, '0')} / ${String(slides.length).padStart(2, '0')}`;
  slide.appendChild(num);

  // Create nav dot
  const dot = document.createElement('div');
  dot.className = 'nav-dot' + (i === 0 ? ' active' : '');
  dot.dataset.index = i;
  const label = document.createElement('span');
  label.className = 'nav-dot-label';
  label.textContent = slide.dataset.label;
  dot.appendChild(label);
  dot.addEventListener('click', () => {
    slide.scrollIntoView({ behavior: 'smooth' });
  });
  navContainer.appendChild(dot);
});

// Track active slide
const slideObserver = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting && e.intersectionRatio > 0.4) {
      const idx = e.target.dataset.slide;
      navContainer.querySelectorAll('.nav-dot').forEach(d => d.classList.remove('active'));
      const activeDot = navContainer.querySelector(`.nav-dot[data-index="${idx}"]`);
      if (activeDot) activeDot.classList.add('active');
    }
  });
}, { threshold: 0.4 });
slides.forEach(s => slideObserver.observe(s));

// Progress bar on scroll
window.addEventListener('scroll', () => {
  const scrollTop = window.scrollY;
  const docHeight = document.documentElement.scrollHeight - window.innerHeight;
  const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
  progressBar.style.width = progress + '%';
}, { passive: true });

// Keyboard navigation
document.addEventListener('keydown', (e) => {
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
  const currentDot = navContainer.querySelector('.nav-dot.active');
  const currentIdx = currentDot ? parseInt(currentDot.dataset.index) : 0;
  if ((e.key === 'ArrowDown' || e.key === 'ArrowRight' || e.key === ' ') && currentIdx < slides.length - 1) {
    e.preventDefault();
    slides[currentIdx + 1].scrollIntoView({ behavior: 'smooth' });
  } else if ((e.key === 'ArrowUp' || e.key === 'ArrowLeft') && currentIdx > 0) {
    e.preventDefault();
    slides[currentIdx - 1].scrollIntoView({ behavior: 'smooth' });
  }
});
</script>
</body>
</html>
